if (self.CavalryLogger) { CavalryLogger.start_js(["Nsav+"]); }

__d('ConversationNubCollapsedSelectorMenu.react',['cx','fbt','ConversationNubUtils','LeftRight.react','PinnedConversationNubsConfig','PopoverMenu.react','PopoverMenuOverlappingBorder','React','ReactMenu','Tooltip.react','XUIBadge.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactMenu').Item,m=300;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={hasTooltip:true};this.$ConversationNubCollapsedSelectorMenu1=false;}n.prototype.componentDidMount=function(){this.$ConversationNubCollapsedSelectorMenu2(this.props.menuTabs);};n.prototype.componentDidUpdate=function(o){this.$ConversationNubCollapsedSelectorMenu2(this.$ConversationNubCollapsedSelectorMenu3(o,this.props));};n.prototype.$ConversationNubCollapsedSelectorMenu2=function(o){o.forEach(c('ConversationNubUtils').informShouldRecheckTabVisibility);};n.prototype.$ConversationNubCollapsedSelectorMenu3=function(o,p){var q=o.menuTabs,r=p.menuTabs,s={};q.forEach(function(t){s[t.getTabID()]=t;});return r.filter(function(t){return s[t.getTabID()]!==t;});};n.prototype.$ConversationNubCollapsedSelectorMenu4=function(){var o=this.props.menuTabs;return (o.map(function(p){return p.getBadgeCount();}).reduce(function(p,q){return p+(q||0);},0));};n.prototype.$ConversationNubCollapsedSelectorMenu5=function(o,p){if(o)return (c('React').createElement(c('XUIBadge.react'),{type:'special',count:o,className:"_4frs"+(p?' '+"_30ql":''),'aria-hidden':p}));return null;};n.prototype.$ConversationNubCollapsedSelectorMenu6=function(){var o=this.$ConversationNubCollapsedSelectorMenu4();return this.$ConversationNubCollapsedSelectorMenu5(o,false);};n.prototype.$ConversationNubCollapsedSelectorMenu7=function(o,p){var q=this.$ConversationNubCollapsedSelectorMenu5(p,true),r=this.$ConversationNubCollapsedSelectorMenu5(o,false),s=null;if(r)s=c('React').createElement('span',{className:"_2ja6"},r);return (c('React').createElement('span',{className:"_2ja7"},q,s));};n.prototype.$ConversationNubCollapsedSelectorMenu8=function(o,p){var q=o.getTabID(),r=o.getTitle(),s=o.getBadgeCount(),t=this.$ConversationNubCollapsedSelectorMenu7(s,p),u=false;return (c('React').createElement(l,{key:q,className:"_30qm",onclick:function(){if(u){u=false;return;}this.$ConversationNubCollapsedSelectorMenu1=false;this.refs.menu.hidePopover();this.props.onTabSelected&&this.props.onTabSelected(o);}.bind(this)},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('span',null,t,c('React').createElement('span',null,r)),c('React').createElement('i',{className:"_30qn uiCloseButton uiCloseButtonSmall",onClick:function(v){v.stopPropagation();v.preventDefault();if(this.props.menuTabs.length>1)this.$ConversationNubCollapsedSelectorMenu1=true;c('ConversationNubUtils').informShouldCloseTab(q,c('ConversationNubUtils').CLOSE_REASON_OVERFLOW_X_OUT);}.bind(this),onMouseDown:function v(){u=true;},role:'button',tabIndex:'0'}))));};n.prototype.$ConversationNubCollapsedSelectorMenu9=function(){var o=this.props.menuTabs;return o.reduce(function(p,q){return Math.max(p,q.getBadgeCount());},1);};n.prototype.$ConversationNubCollapsedSelectorMenu10=function(){var o=this.props.menuTabs,p=this.$ConversationNubCollapsedSelectorMenu9(),q=o.map(function(r){return this.$ConversationNubCollapsedSelectorMenu8(r,p);}.bind(this));return (c('React').createElement(c('ReactMenu'),{maxheight:m},q));};n.prototype.$ConversationNubCollapsedSelectorMenu11=function(){return i._("Posts");};n.prototype.$ConversationNubCollapsedSelectorMenu12=function(){var o=this.$ConversationNubCollapsedSelectorMenu6(),p=c('React').createElement('div',{className:"_4fs1"},o,c('React').createElement('i',{className:"_4fs2"}));if(this.state.hasTooltip)p=c('React').createElement(c('Tooltip.react'),{tooltip:this.$ConversationNubCollapsedSelectorMenu11(),display:'block',alignH:'right'},p);return (c('React').createElement('div',{className:"_2ja9"},p));};n.prototype.render=function(){var o=this.$ConversationNubCollapsedSelectorMenu10(),p=c('PinnedConversationNubsConfig').pinnedToLeft?'left':'right';return (c('React').createElement(c('PopoverMenu.react'),{menu:o,ref:'menu',position:'above',alignh:p,behaviors:[c('PopoverMenuOverlappingBorder')],onShow:function(){this.$ConversationNubCollapsedSelectorMenu1=false;this.setState({hasTooltip:false});}.bind(this),onHide:function(){if(this.$ConversationNubCollapsedSelectorMenu1){this.$ConversationNubCollapsedSelectorMenu1=false;this.refs.menu.showPopover();}else this.setState({hasTooltip:true});}.bind(this)},this.$ConversationNubCollapsedSelectorMenu12()));};f.exports=n;}),null);
__d('FantaMercuryTabOverflowTitle.react',['CurrentUser','MercuryThreads','MercuryThreadTitle.react','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$FantaMercuryTabOverflowTitle1=new (c('SubscriptionsHandler'))();this.state={thread:null};}k.prototype.componentWillMount=function(){c('MercuryThreads').get().getThreadMeta(this.props.threadID,function(l){return (this.setState({thread:l}));}.bind(this));this.$FantaMercuryTabOverflowTitle1.addSubscriptions(c('MercuryThreads').addListener('change',function(){this.setState({thread:c('MercuryThreads').get().getThreadMetaNow(this.props.threadID)});}.bind(this)));};k.prototype.componentWillUnmount=function(){this.$FantaMercuryTabOverflowTitle1.release();};k.prototype.render=function(){var l=this.props.threadID,m=this.state.thread;if(!m)return null;return (c('React').createElement(c('MercuryThreadTitle.react'),{isNewThread:c('MercuryThreads').get().isNewEmptyLocalThread(l),showUnreadCount:true,thread:m,useAndSeparator:true,useShortName:!m.is_canonical,viewer:c('CurrentUser').getID()}));};k.propTypes={threadID:j.string.isRequired};f.exports=k;}),null);
__d('FantaMercuryTabOverflow.react',['ix','cx','fbt','ContextualLayerAutoFlip','FantaMercuryTabOverflowTitle.react','FantaTabActions','FantaTypeTab','Image.react','immutable','PopoverMenu.react','PopoverMenuOverlappingBorder','React','ReactMenu','XUIBadge.react','XUICloseButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactMenu').SelectableMenu,n=c('ReactMenu').SelectableItem;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.render=function(){var p=this.props.items,q=c('React').createElement(m,null,p.map(function(r){return (c('React').createElement(n,{className:"_372-",key:r.id,onclick:function s(){return c('FantaTabActions').focusTab(r.id);}},c('React').createElement(c('FantaMercuryTabOverflowTitle.react'),{threadID:r.id}),c('React').createElement(c('XUICloseButton.react'),{className:"_372_ dark",onClick:function s(){return c('FantaTabActions').closeTab(r.id);},size:'small'}),c('React').createElement(c('XUICloseButton.react'),{className:"_372_ light",onClick:function s(){return c('FantaTabActions').closeTab(r.id);},shade:'light',size:'small'})));}).toArray());return (c('React').createElement(c('PopoverMenu.react'),{alignh:'right',alignv:'top',behaviors:[c('PopoverMenuOverlappingBorder')],className:"fbNub _50-v _3731",layerBehaviors:[c('ContextualLayerAutoFlip')],menu:q},c('React').createElement('a',{href:'#',role:'button',className:"fbNubButton"},c('React').createElement('span',{className:"_3732"},c('React').createElement(c('Image.react'),{alt:j._("messages"),className:'messagesIcon',src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/messages_20_fig-light-30.png")}),c('React').createElement(c('XUIBadge.react'),{className:"unreadCount",count:0,'data-jsid':'numMessages',type:'special'})))));};function o(){k.apply(this,arguments);}f.exports=o;}),null);